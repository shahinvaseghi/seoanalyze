<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rank Tracker</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:#07111f;color:#e7eaf3;margin:0}
    header{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;background:#0d1830;border-bottom:1px solid #1f2a44}
    .brand{font-weight:700}
    .container{padding:24px;max-width:1200px;margin:0 auto}
    a{color:#93c5fd;text-decoration:none}
    .input-group{margin:20px 0}
    .input-group label{display:block;margin-bottom:8px;font-weight:500;color:#93c5fd}
    .input-group input{width:100%;max-width:300px;padding:10px;border:1px solid #1f2a44;border-radius:6px;background:#0d1830;color:#e7eaf3;font-size:14px;margin-right:12px}
    .btn{background:#10b981;color:#fff;border:none;border-radius:6px;padding:10px 20px;cursor:pointer;font-size:14px;font-weight:600;margin-right:8px}
    .btn:hover{background:#059669}
    .btn-danger{background:#ef4444}
    .btn-danger:hover{background:#dc2626}
    .section{background:#0d1830;border:1px solid #1f2a44;border-radius:8px;padding:20px;margin:16px 0}
    .section h3{color:#93c5fd;margin-top:0}
    .keyword-item{padding:12px;margin:8px 0;background:#1f2a44;border-radius:4px;display:flex;justify-content:space-between;align-items:center}
    .keyword-item strong{color:#93c5fd}
    .loading{text-align:center;padding:40px;color:#a0aec0}
    .error{background:#ef4444;color:white;padding:16px;border-radius:8px;margin:16px 0}
  </style>
</head>
<body>
  <header>
    <div class="brand">SEO Tools</div>
    <nav>
      <a href="/dashboard">Dashboard</a> &nbsp; | &nbsp;
      <a href="/logout">Logout</a>
    </nav>
  </header>
  <div class="container">
    <h1>ðŸ“ˆ Rank Tracker</h1>
    <p style="color:#a0aec0">Track keyword rankings over time</p>
    
    <div class="section">
      <h3>Add Keyword to Track</h3>
      <div style="display:flex;align-items:end;gap:12px">
        <div class="input-group" style="margin:0;flex:1">
          <label for="keyword">Keyword:</label>
          <input id="keyword" type="text" placeholder="seo tools" />
        </div>
        <div class="input-group" style="margin:0;flex:1">
          <label for="keywordUrl">URL (Optional):</label>
          <input id="keywordUrl" type="text" placeholder="https://example.com/page" />
        </div>
        <button class="btn" onclick="addKeyword()" style="margin-top:24px">Add</button>
      </div>
    </div>
    
    <div class="section">
      <h3>Tracked Keywords</h3>
      <div id="keywordsList"></div>
    </div>
    
    <div class="section">
      <h3>Add Ranking</h3>
      <div style="display:flex;align-items:end;gap:12px">
        <div class="input-group" style="margin:0;flex:1">
          <label for="rankKeyword">Keyword:</label>
          <input id="rankKeyword" type="text" placeholder="seo tools" />
        </div>
        <div class="input-group" style="margin:0;flex:1">
          <label for="rank">Rank (1-100):</label>
          <input id="rank" type="number" min="1" max="100" placeholder="5" />
        </div>
        <div class="input-group" style="margin:0;flex:1">
          <label for="rankUrl">URL (Optional):</label>
          <input id="rankUrl" type="text" placeholder="https://example.com/page" />
        </div>
        <button class="btn" onclick="addRanking()" style="margin-top:24px">Add Ranking</button>
      </div>
    </div>
    
    <div id="results"></div>
  </div>
  <script>
    loadKeywords();
    function loadKeywords() {
      fetch('/rank-tracker/api/keywords').then(r => r.json()).then(d => {
        const list = document.getElementById('keywordsList');
        if (!d.keywords || Object.keys(d.keywords).length === 0) {
          list.innerHTML = '<p style="color:#a0aec0">No keywords tracked yet</p>';
          return;
        }
        let html = '';
        Object.entries(d.keywords).forEach(([keyword, data]) => {
          const lastRank = data.rankings && data.rankings.length > 0 ? data.rankings[data.rankings.length - 1].rank : 'N/A';
          html += `<div class="keyword-item"><div><strong>${keyword}</strong><br><span style="color:#a0aec0;font-size:12px">Last Rank: ${lastRank}</span></div><button class="btn btn-danger" onclick="deleteKeyword('${keyword}')">Delete</button></div>`;
        });
        list.innerHTML = html;
      });
    }
    function addKeyword() {
      const keyword = document.getElementById('keyword').value.trim();
      const url = document.getElementById('keywordUrl').value.trim();
      if (!keyword) { alert('Enter keyword'); return; }
      fetch('/rank-tracker/api/keywords', {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({keyword, url})})
      .then(r => r.json()).then(d => { if (d.success) { document.getElementById('keyword').value = ''; document.getElementById('keywordUrl').value = ''; loadKeywords(); } });
    }
    function deleteKeyword(keyword) {
      if (!confirm(`Delete "${keyword}"?`)) return;
      fetch(`/rank-tracker/api/keywords/${encodeURIComponent(keyword)}`, {method:'DELETE'})
      .then(r => r.json()).then(d => { if (d.success) loadKeywords(); });
    }
    function addRanking() {
      const keyword = document.getElementById('rankKeyword').value.trim();
      const rank = document.getElementById('rank').value;
      const url = document.getElementById('rankUrl').value.trim();
      if (!keyword || !rank) { alert('Enter keyword and rank'); return; }
      fetch('/rank-tracker/api/rankings', {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({keyword, rank:parseInt(rank), url})})
      .then(r => r.json()).then(d => { if (d.success) { document.getElementById('rankKeyword').value = ''; document.getElementById('rank').value = ''; document.getElementById('rankUrl').value = ''; loadKeywords(); } });
    }
  </script>
</body>
</html>

