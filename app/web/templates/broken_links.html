<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Broken Links Checker</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:#07111f;color:#e7eaf3;margin:0}
    header{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;background:#0d1830;border-bottom:1px solid #1f2a44}
    .brand{font-weight:700}
    .container{padding:24px;max-width:1200px;margin:0 auto}
    a{color:#93c5fd;text-decoration:none}
    .input-group{margin:20px 0}
    .input-group label{display:block;margin-bottom:8px;font-weight:500;color:#93c5fd}
    .input-group input,.input-group select{width:100%;max-width:600px;padding:10px;border:1px solid #1f2a44;border-radius:6px;background:#0d1830;color:#e7eaf3;font-size:14px}
    .btn{background:#10b981;color:#fff;border:none;border-radius:6px;padding:12px 24px;cursor:pointer;font-size:14px;font-weight:600}
    .btn:hover{background:#059669}
    .section{background:#0d1830;border:1px solid #1f2a44;border-radius:8px;padding:20px;margin:16px 0}
    .section h3{color:#93c5fd;margin-top:0}
    .broken-link{padding:12px;margin:8px 0;background:#1f2a44;border-left:4px solid #ef4444;border-radius:4px}
    .loading{text-align:center;padding:40px;color:#a0aec0}
    .error{background:#ef4444;color:white;padding:16px;border-radius:8px;margin:16px 0}
    .summary{background:#0d1830;border:1px solid #1f2a44;border-radius:8px;padding:20px;margin:16px 0;text-align:center}
  </style>
</head>
<body>
  <header>
    <div class="brand">SEO Tools</div>
    <nav>
      <a href="/dashboard">Dashboard</a> &nbsp; | &nbsp;
      <a href="/logout">Logout</a>
    </nav>
  </header>
  <div class="container">
    <h1>ðŸ”— Broken Links Checker</h1>
    <p style="color:#a0aec0">Find broken internal and external links</p>
    
    <div class="input-group">
      <label for="url">Website URL:</label>
      <input id="url" type="text" placeholder="https://example.com" />
    </div>
    <div class="input-group">
      <label for="checkType">Check Type:</label>
      <select id="checkType">
        <option value="page">Current Page Only</option>
        <option value="site">Entire Site (up to 10 pages)</option>
      </select>
    </div>
    
    <button class="btn" onclick="checkLinks()">Check Links</button>
    <div id="results"></div>
  </div>
  <script>
    function checkLinks() {
      const url = document.getElementById('url').value.trim();
      const checkType = document.getElementById('checkType').value;
      const results = document.getElementById('results');
      if (!url) { results.innerHTML = '<div class="error">Enter URL</div>'; return; }
      results.innerHTML = '<div class="loading">Checking links... This may take a minute.</div>';
      fetch('/broken-links/api/check', {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({url, type:checkType})})
      .then(r => r.json()).then(d => {
        if (d.error) { results.innerHTML = `<div class="error">${d.error}</div>`; return; }
        let html = `<div class="summary"><h3>Summary</h3><p>Total Links: ${d.total_links_checked} | Broken: ${d.broken_links_count} | Working: ${d.working_links_count}</p></div>`;
        if (d.broken_links && d.broken_links.length > 0) {
          html += '<div class="section"><h3>Broken Links</h3>';
          d.broken_links.forEach(link => {
            html += `<div class="broken-link"><strong>${link.url}</strong><br>Status: ${link.status_code || link.error || 'Unknown'}</div>`;
          });
          html += '</div>';
        }
        results.innerHTML = html;
      }).catch(e => results.innerHTML = `<div class="error">Error: ${e.message}</div>`);
    }
  </script>
</body>
</html>

