# ุฑูุน ูุดฺฉู "Not Secure" ุฏุฑ ูุฑูุฑฺฏุฑ

## ูุถุนุช ูุนู

โ ฺฏูุงู Cloudflare Origin Certificate ูุตุจ ุดุฏู  
โ Nginx ุฑู HTTPS ฺฏูุด ูโุฏูุฏ  
โ ูุฑูุฑฺฏุฑ ูููุฒ "Not secure" ูุดุงู ูโุฏูุฏ

---

## ฺุฑุง ุงู ูุดฺฉู ูพุด ูโุขุฏุ

**ฺฏูุงู Cloudflare Origin Certificate** ููุท ุจุฑุง ุฑูุฒูฺฏุงุฑ ุงุฑุชุจุงุท ุจู **Cloudflare โ ุณุฑูุฑ** ุทุฑุงุญ ุดุฏู ุงุณุช.

ูุฑูุฑฺฏุฑูุง **ูุณุชููุงู** ุจู ุงู ฺฏูุงู ุงุนุชูุงุฏ ูุฏุงุฑูุฏ.

### ูุญูู ฺฉุงุฑ ุตุญุญ:

```
ูุฑูุฑฺฏุฑ โ [Cloudflare Universal SSL] โ Cloudflare โ [Origin Cert] โ ุณุฑูุฑ
         (ฺฏูุงู ูุนุชุจุฑ ุนููู)                      (ฺฏูุงู ุฎุตูุต)
```

ุงฺฏุฑ ุชุฑุงูฺฉ ูุณุชููุงู ุจู ุณุฑูุฑ ุจุฑูุฏ:
```
ูุฑูุฑฺฏุฑ โ [Origin Cert] โ ุณุฑูุฑ
         โ Not Secure
```

---

## ุฑุงูโุญู (ฺฺฉโูุณุช)

### โ ูุฑุญูู 1: ุจุฑุฑุณ Proxy Status ุฏุฑ DNS

1. ุจุฑู ุจู: https://dash.cloudflare.com
2. ุงูุชุฎุงุจ ุฏุงููู: `shahinvaseghi.ir`
3. ููู: **DNS** โ **Records**
4. ูพุฏุง ฺฉู ุฑฺฉูุฑุฏ: `seoanalyze` (A record)
5. ฺฺฉ ฺฉู:
   - **๐ ุงุจุฑ ูุงุฑูุฌ (Proxied)** โ ุตุญุญ
   - **โช ุงุจุฑ ุฎุงฺฉุณุชุฑ (DNS only)** โ ุงุดุชุจุงู!

**ุงฺฏุฑ ุฎุงููุด ุงุณุช (DNS only):**
- ฺฉูฺฉ ุฑู ุขฺฉูู ุงุจุฑ
- ุชุจุฏู ุจู **Proxied** (ูุงุฑูุฌ) ฺฉู
- Save

---

### โ ูุฑุญูู 2: ุจุฑุฑุณ SSL/TLS Mode

1. ููู: **SSL/TLS** โ **Overview**
2. ุจุฎุด: **SSL/TLS encryption mode**
3. ุจุงุฏ ุฑู ฺฉ ุงุฒ ุงูโูุง ุจุงุดุฏ:
   - โ **Full (strict)** - ุชูุตู ูโุดูุฏ
   - โ๏ธ **Full** - ฺฉุงุฑ ูโฺฉูุฏ ูู ฺฉูุชุฑ ุงูู
   - โ **Flexible** - ุจุงุฏ ุชุบุฑ ุจุฏูุฏ!
   - โ **Off** - ุจุงุฏ ุชุบุฑ ุจุฏูุฏ!

**ุงฺฏุฑ Flexible ุง Off ุงุณุช:**
- ุงูุชุฎุงุจ ฺฉู: **Full (strict)**
- ุตุจุฑ ฺฉู 2-3 ุฏููู

---

### โ ูุฑุญูู 3: ุจุฑุฑุณ Universal SSL

1. ููู: **SSL/TLS** โ **Edge Certificates**
2. ุจุฎุด: **Universal SSL**
3. ูุถุนุช ุจุงุฏ ุจุงุดุฏ:
   - โ **Active** - ุตุญุญ
   - โณ **Initializing** - ุตุจุฑ ฺฉูุฏ
   - โ **Disabled** - ูุนุงู ฺฉูุฏ!

**ุงฺฏุฑ ุบุฑูุนุงู ุงุณุช:**
- ฺฉูฺฉ ุฑู **Enable Universal SSL**
- ุตุจุฑ ฺฉู 15-30 ุฏููู (ุจุฑุง ุตุฏูุฑ ฺฏูุงู)

---

### โ ูุฑุญูู 4: ุชูุธูุงุช ุงููุช ุงุถุงู

ุฏุฑ ููุงู ุตูุญู **Edge Certificates**:

1. **Always Use HTTPS:** ON โ
2. **Minimum TLS Version:** 1.2 โ
3. **Automatic HTTPS Rewrites:** ON โ (ุงุฎุชุงุฑ)

---

### โ ูุฑุญูู 5: ูพุงฺฉ ฺฉุฑุฏู Cache

1. ููู: **Caching** โ **Configuration**
2. ฺฉูฺฉ: **Purge Everything**
3. ุชุฃุฏ

---

### โ ูุฑุญูู 6: ุชุณุช

1. ูุฑูุฑฺฏุฑ ุฑุง **ฺฉุงููุงู ุจุจูุฏ**
2. ูุฑูุฑฺฏุฑ ุฑุง ุจุงุฒ ฺฉู
3. ุจุฑู ุจู: `https://seoanalyze.shahinvaseghi.ir`
4. ุจุงุฏ ููู ุณุจุฒ ุฑุง ุจุจู! ๐โ

---

## ุชุณุช ู ุนุจโุงุจ

### โ๏ธ ฺฺฉ ฺฉุฑุฏู Cloudflare Headers

1. ุจุงุฒ ฺฉู ุณุงุช ุฏุฑ ูุฑูุฑฺฏุฑ
2. F12 โ ุชุจ **Network**
3. Refresh ฺฉู (F5)
4. ฺฉูฺฉ ุฑู ุงููู request
5. ุชุจ **Headers** โ **Response Headers**

**ุจุงุฏ ุงูโูุง ุฑุง ุจุจู:**
```
server: cloudflare
cf-ray: 8xxxxxxxxxxxxx-XXX
cf-cache-status: DYNAMIC
```

โ ุงฺฏุฑ ุฏุฏ โ ุชุฑุงูฺฉ ุงุฒ Cloudflare ุฑุฏ ูโุดูุฏ (ุฏุฑุณุช)  
โ ุงฺฏุฑ ูุฏุฏ โ Proxy ุฎุงููุด ุงุณุช (DNS only)

---

### โ๏ธ ุชุณุช ุงุฒ ุฎุท ูุฑูุงู

```bash
curl -I https://seoanalyze.shahinvaseghi.ir 2>&1 | grep -i cloudflare
```

ุจุงุฏ ฺุฒ ุดุจู ุงู ุจุจู:
```
server: cloudflare
cf-ray: ...
```

---

## ูุดฺฉูุงุช ุฑุงุฌ

### โ ูููุฒ "Not Secure" ุงุณุช

**ุนูุช 1: DNS Record ุฑู "DNS only" ุงุณุช**
- ุฑุงูโุญู: ุฏุฑ DNS Recordsุ Proxy ุฑุง ูุนุงู ฺฉู (ุงุจุฑ ูุงุฑูุฌ)

**ุนูุช 2: Universal SSL ูููุฒ ุตุงุฏุฑ ูุดุฏู**
- ุฑุงูโุญู: ุตุจุฑ ฺฉู 15-30 ุฏููู
- ฺฺฉ ฺฉู: SSL/TLS โ Edge Certificates โ Universal SSL Status

**ุนูุช 3: Cache ูุฑูุฑฺฏุฑ**
- ุฑุงูโุญู: Hard refresh (Ctrl+Shift+R) ุง Incognito mode

**ุนูุช 4: SSL Mode ุงุดุชุจุงู ุงุณุช**
- ุฑุงูโุญู: ุชุบุฑ ุจู "Full (strict)"

---

### โ Error 525: SSL handshake failed

**ุนูุช:** ฺฏูุงู Origin ุฏุฑ ุณุฑูุฑ ูุดฺฉู ุฏุงุฑุฏ

**ุฑุงูโุญู:**
```bash
# ฺฺฉ ฺฉุฑุฏู ฺฏูุงู
sudo openssl x509 -in /etc/ssl/cloudflare/cert.pem -noout -dates

# Restart nginx
sudo systemctl restart nginx
```

---

### โ Error 526: Invalid SSL certificate

**ุนูุช:** SSL Mode ุฑู "Full (strict)" ุงุณุช ูู ฺฏูุงู Origin ูุงูุนุชุจุฑ ุงุณุช

**ุฑุงูโุญู:**
1. ฺฺฉ ฺฉู ฺฏูุงู Cloudflare Origin ุฏุฑุณุช ูุตุจ ุดุฏู
2. ุง ุชุบุฑ SSL Mode ุจู "Full" (ูููุช)

---

## ุฎูุงุตู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุจุฑุง ุฑูุน "Not Secure":                            โ
โ                                                     โ
โ  1๏ธโฃ  DNS Proxy: ON (ุงุจุฑ ูุงุฑูุฌ ๐)                โ
โ  2๏ธโฃ  SSL Mode: Full (strict)                       โ
โ  3๏ธโฃ  Universal SSL: Active                         โ
โ  4๏ธโฃ  Always Use HTTPS: ON                          โ
โ  5๏ธโฃ  Purge Cache                                   โ
โ  6๏ธโฃ  ูุฑูุฑฺฏุฑ ุฑุง ุจุจูุฏ ู ุจุงุฒ ฺฉู                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ูููโุชุฑู:** ูุทูุฆู ุดู DNS Record ุฑู **Proxied** ุงุณุช! ๐

---

## ูพุดุชุจุงู

ุงฺฏุฑ ุจุนุฏ ุงุฒ ุงูุฌุงู ุชูุงู ูุฑุงุญู ุจุงูุง ูููุฒ ูุดฺฉู ุฏุงุฑ:

1. ุงุณฺฉุฑูโุดุงุช ุงุฒ **DNS Records** ุจูุฑุณุช
2. ุงุณฺฉุฑูโุดุงุช ุงุฒ **SSL/TLS Overview** ุจูุฑุณุช
3. ุงุณฺฉุฑูโุดุงุช ุงุฒ **Edge Certificates** ุจูุฑุณุช
4. ูุชุฌู ุงู ุฏุณุชูุฑ ุฑู ุจูุฑุณุช:
   ```bash
   curl -I https://seoanalyze.shahinvaseghi.ir
   ```

---

**ุชุงุฑุฎ:** 2025-11-04  
**ูุถุนุช:** ฺฏูุงู Origin ูุตุจ ุดุฏูุ ููุชุธุฑ ูุนุงูโุณุงุฒ Proxy


